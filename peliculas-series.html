<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Pel√≠culas y Series</title>
    <style>
        /* Estilos generales */
        body {
            font-family: Arial, sans-serif;
            background-color: #fff8c6; /* Amarillo pastel muy tenue */
            margin: 0;
            padding: 0;
            text-align: center;
        }

        h1 {
            font-size: 2.5em;
            margin-top: 40px;
            color: #333;
            letter-spacing: 2px;
        }

        /* Estilos para los botones de navegaci√≥n */
        .navegar-boton {
            text-decoration: none;
            padding: 12px 18px;
            margin: 10px;
            border-radius: 5px;
            font-weight: bold;
            display: inline-block;
            font-size: 1.2em;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .navegar-boton:hover {
            opacity: 0.8;
            transform: scale(1.1);
        }

        /* Colores espec√≠ficos de los botones */
        .boton-inicio {
            background-color: #00ff00 !important; /* Verde brillante */
            color: white;
        }

        .boton-musica {
            background-color: #ff5722 !important; /* Naranja */
            color: white;
        }

        .boton-personajes {
            background-color: #9b59b6 !important; /* Morado */
            color: white;
        }

        .boton-libros {
            background-color: #40e0d0 !important; /* Turquesa */
            color: white;
        }

        /* Dise√±o para las tarjetas de pel√≠culas */
        .pelicula-card {
            display: inline-block;
            width: 200px; /* Ancho reducido */
            margin: 20px;
            padding: 10px;
            border-radius: 10px;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            text-align: center; /* Centrado de los contenidos */
            height: auto;
        }

        .pelicula-card img {
            width: 100%;  /* Imagen centrada y ajustada */
            height: auto;
            border-radius: 8px;
            margin-bottom: 15px;
            cursor: pointer; /* Indica que la imagen es clickeable */
        }

        .pelicula-card h3 {
            font-size: 1.3em;
            margin: 10px 0;
            color: #333;
            text-decoration: none; /* Eliminar subrayado en el t√≠tulo */
        }

        .pelicula-card p {
            font-size: 1em;
            margin: 5px 0;
        }

        /* Contenedor de las pel√≠culas */
        #movies-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            padding: 20px;
        }

        /* Contenedor de los botones de navegaci√≥n */
        .enlaces-navegacion {
            margin-top: 30px;
        }

        /* Estilos para la fuente de los datos */
        .fuente-datos {
            font-size: 0.8em;
            color: #888;
            position: fixed;
            bottom: 10px;
            right: 10px;
        }
    </style>
</head>
<body>
    <h1>Pel√≠culas Populares</h1>
    
    <!-- Enlace para navegar a otras p√°ginas -->
    <div class="enlaces-navegacion">
        <a href="index.html" class="navegar-boton boton-inicio">Inicio üîô</a>
        <a href="musica.html" class="navegar-boton boton-musica">M√∫sica üéµ</a>
        <a href="libros.html" class="navegar-boton boton-libros">Libros üìö</a>
        <a href="personajes.html" class="navegar-boton boton-personajes">Personajes ‚ôÇ‚ôÄ</a>
    </div>

    <!-- Secci√≥n para mostrar las pel√≠culas -->
    <section id="movies-list"></section>

    <!-- Fuente de los datos -->
    <div class="fuente-datos">
        Datos recogidos de TMDb
    </div>

    <script>
        const apiKey = '9a36d4ead166703cb424ee2c431342b7';  // Tu clave API de TMDb
        const apiUrl = `https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&language=es-ES&page=1`;

        // Funci√≥n para obtener la certificaci√≥n de edad de cada pel√≠cula
        async function getCertification(movieId) {
            const certificationUrl = `https://api.themoviedb.org/3/movie/${movieId}/release_dates?api_key=${apiKey}&language=es-ES`;
            try {
                const response = await fetch(certificationUrl);
                const data = await response.json();
                const certifications = data.results;

                // Buscar certificaci√≥n de Espa√±a o de un pa√≠s con una clasificaci√≥n
                const certification = certifications.find(cert => cert.iso_3166_1 === 'ES');
                if (certification) {
                    const cert = certification.release_dates.find(date => date.certification);
                    return cert ? (cert.certification === 'A' ? 'Apto' : cert.certification) : 'No disponible';
                }
                return 'No disponible';
            } catch (error) {
                console.error('Error al obtener la certificaci√≥n:', error);
                return 'No disponible';
            }
        }

        // Funci√≥n para obtener y mostrar las pel√≠culas
        async function getMovies() {
            try {
                const response = await fetch(apiUrl);
                const data = await response.json();
                const movies = data.results;

                // Ordenar las pel√≠culas por calificaci√≥n (vote_average) de mayor a menor
                movies.sort((a, b) => b.vote_average - a.vote_average);

                // Filtrar las pel√≠culas para eliminar las de g√©nero "Documental"
                const filteredMovies = movies.filter(movie => {
                    return !movie.genre_ids.includes(99); // Excluir el g√©nero "Documental" (ID 99)
                });

                // Mostrar las pel√≠culas en la p√°gina
                const moviesList = document.getElementById('movies-list');
                moviesList.innerHTML = '';  // Limpiar contenido anterior

                for (let movie of filteredMovies) {
                    const movieDiv = document.createElement('div');
                    movieDiv.classList.add('pelicula-card');
                    const genres = movie.genre_ids.map(id => {
                        // Buscar los nombres de los g√©neros (esto es solo un ejemplo)
                        const genreNames = {
                            28: 'Acci√≥n',
                            12: 'Aventura',
                            16: 'Animaci√≥n',
                            35: 'Comedia',
                            80: 'Crimen',
                            99: 'Documental',
                            18: 'Drama',
                            10751: 'Familiar',
                            14: 'Fantas√≠a',
                            36: 'Historia',
                            27: 'Terror',
                            10402: 'M√∫sica',
                            9648: 'Misterio',
                            10749: 'Rom√°ntico',
                            878: 'Ciencia ficci√≥n',
                            10770: 'Pel√≠cula de TV',
                            53: 'Suspense', // Corregido de "Suspenso" a "Suspense"
                            10752: 'B√©lica',
                            37: 'Western'
                        };
                        return genreNames[id] || 'Desconocido';
                    }).join(', ');

                    // Reemplazar el t√≠tulo "‡∏õ‡∏•‡πâ‡∏ô‡∏ó‡∏∞‡∏•‡∏∏‡πÑ‡∏°‡∏•‡πå" por la traducci√≥n
                    const title = movie.title === '‡∏õ‡∏•‡πâ‡∏ô‡∏ó‡∏∞‡∏•‡∏∏‡πÑ‡∏°‡∏•‡πå' ? 'Robo a trav√©s de las millas' : movie.title;

                    // Obtener certificaci√≥n de edad
                    const certification = await getCertification(movie.id);

                    movieDiv.innerHTML = `
                        <a href="https://www.themoviedb.org/movie/${movie.id}" target="_blank">
                            <img src="https://image.tmdb.org/t/p/w300${movie.poster_path}" alt="${title}">
                        </a>
                        <h3>${title}</h3>
                        <p><strong>Calificaci√≥n:</strong> ${movie.vote_average}</p>
                        <p><strong>G√©neros:</strong> ${genres}</p>
                        <p><strong>Certificaci√≥n de edad:</strong> ${certification}</p>
                    `;
                    moviesList.appendChild(movieDiv);
                }
            } catch (error) {
                console.error('Error al obtener las pel√≠culas:', error);
            }
        }

        // Llamar a la funci√≥n para obtener las pel√≠culas
        getMovies();
    </script>
</body>
</html>
